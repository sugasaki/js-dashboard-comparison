!function(e,n){"use strict";function t(e){e.widget("news",{title:"News",description:"Displays a RSS/Atom feed",category:"News",templateUrl:"{widgetsPath}/news/src/view.html",controller:"NewsController",controllerAs:"vm",config:{num:5,showTitle:!0,showDescription:!0},resolve:{feed:["NewsService","config",function(e,n){if(n.url)return e.get(n)}]},edit:{templateUrl:"{widgetsPath}/news/src/edit.html"}})}function i(e,n,t){function i(e){return e.num||(e.num=5),t+encodeURIComponent(e.url)+"&num="+e.num}function r(t){var r=e.defer();return n.jsonp(i(t)).success(function(e){e&&e.feed?r.resolve(e.feed):r.reject("response does not contain feed element")}).error(function(e){r.reject(e)}),r.promise}return{get:r}}function r(){return function(e){return new Date(e)}}function o(e,n){this.feed=e}angular.module("adf.widget.news",["adf.provider"]).constant("newsServiceUrl","").config(t),t.$inject=["dashboardProvider"],angular.module("adf.widget.news").run(["$templateCache",function(e){e.put("{widgetsPath}/news/src/edit.html",'<form role=form><div class=form-group><label for=url>Feed url</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter feed url"></div><div class=form-group><label for=num>Number of Entries</label> <input type=number class=form-control id=num ng-model=config.num></div><div class=form-group><label for=showTitle>Show Feed Title</label> <input type=checkbox class=form-control id=showTitle ng-model=config.showTitle></div><div class=form-group><label for=showTitle>Show Feed Description</label> <input type=checkbox class=form-control id=showDescription ng-model=config.showDescription></div></form>'),e.put("{widgetsPath}/news/src/view.html","<div class=news><div class=\"alert alert-info\" ng-if=!vm.feed>Please insert a feed url in the widget configuration</div><div ng-if=vm.feed><h3 ng-if=config.showTitle><a ng-href={{vm.feed.link}} target=_blank>{{vm.feed.title}}</a></h3><p ng-if=config.showDescription>{{vm.feed.description}}</p><div class=media ng-repeat=\"entry in vm.feed.entries\"><div class=media-body><h4 class=media-heading><a ng-href={{entry.link}} target=_blank>{{entry.title}}</a></h4><p>{{entry.contentSnippet}}</p><small>{{ (entry.author) ? entry.author + ',' : '' }} {{entry.pubDate | toDate | date: 'yyyy-MM-dd HH:mm'}}</small></div></div></div></div>")}]),angular.module("adf.widget.news").service("NewsService",i),i.$inject=["$q","$http","newsServiceUrl"],angular.module("adf.widget.news").filter("toDate",r),angular.module("adf.widget.news").controller("NewsController",o),o.$inject=["feed","config"]}(window);